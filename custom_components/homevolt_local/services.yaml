reboot:
  name: Reboot device
  description: Reboot the Homevolt device via hardware reset. The device will be temporarily unavailable.
  fields:
    device_id:
      name: Device
      description: The Homevolt device to reboot
      required: true
      selector:
        device:
          integration: homevolt_local

clear_schedule:
  name: Clear schedule
  description: Clear all scheduled charging entries on the Homevolt device
  fields:
    device_id:
      name: Device
      description: The Homevolt device to clear the schedule for
      required: true
      selector:
        device:
          integration: homevolt_local

set_idle:
  name: Set battery to idle
  description: Set the Homevolt battery to idle mode (no charge/discharge). Requires local mode to be enabled.
  fields:
    device_id:
      name: Device
      description: The Homevolt device to set to idle
      required: true
      selector:
        device:
          integration: homevolt_local
    offline:
      name: Offline
      description: Take inverter offline during idle mode
      required: false
      default: false
      selector:
        boolean:

set_charge:
  name: Set battery to charge
  description: Set the Homevolt battery to charge mode (inverter charge from grid/solar). Requires local mode to be enabled.
  fields:
    device_id:
      name: Device
      description: The Homevolt device to set to charge
      required: true
      selector:
        device:
          integration: homevolt_local
    setpoint:
      name: Power setpoint
      description: Optional power setpoint in watts
      required: false
      selector:
        number:
          min: 0
          max: 25000
          step: 100
          unit_of_measurement: W
          mode: box
    min_soc:
      name: Minimum SOC
      description: Optional minimum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box
    max_soc:
      name: Maximum SOC
      description: Optional maximum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box

set_discharge:
  name: Set battery to discharge
  description: Set the Homevolt battery to discharge mode (inverter discharge to home/grid). Requires local mode to be enabled.
  fields:
    device_id:
      name: Device
      description: The Homevolt device to set to discharge
      required: true
      selector:
        device:
          integration: homevolt_local
    setpoint:
      name: Power setpoint
      description: Optional power setpoint in watts
      required: false
      selector:
        number:
          min: 0
          max: 25000
          step: 100
          unit_of_measurement: W
          mode: box
    min_soc:
      name: Minimum SOC
      description: Optional minimum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box
    max_soc:
      name: Maximum SOC
      description: Optional maximum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box

set_grid_charge:
  name: Set battery to grid charge
  description: Set the Homevolt battery to grid charge mode (force charge from grid). Requires local mode to be enabled.
  fields:
    device_id:
      name: Device
      description: The Homevolt device to set to grid charge
      required: true
      selector:
        device:
          integration: homevolt_local
    setpoint:
      name: Power setpoint
      description: Optional power setpoint in watts
      required: false
      selector:
        number:
          min: 0
          max: 25000
          step: 100
          unit_of_measurement: W
          mode: box
    min_soc:
      name: Minimum SOC
      description: Optional minimum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box
    max_soc:
      name: Maximum SOC
      description: Optional maximum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box

set_grid_discharge:
  name: Set battery to grid discharge
  description: Set the Homevolt battery to grid discharge mode (force discharge to grid). Requires local mode to be enabled.
  fields:
    device_id:
      name: Device
      description: The Homevolt device to set to grid discharge
      required: true
      selector:
        device:
          integration: homevolt_local
    setpoint:
      name: Power setpoint
      description: Optional power setpoint in watts
      required: false
      selector:
        number:
          min: 0
          max: 25000
          step: 100
          unit_of_measurement: W
          mode: box
    min_soc:
      name: Minimum SOC
      description: Optional minimum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box
    max_soc:
      name: Maximum SOC
      description: Optional maximum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box

set_grid_charge_discharge:
  name: Set battery to grid charge/discharge
  description: Set the Homevolt battery to bidirectional grid mode (allows both charging from and discharging to grid). Requires local mode to be enabled.
  fields:
    device_id:
      name: Device
      description: The Homevolt device to set to grid charge/discharge
      required: true
      selector:
        device:
          integration: homevolt_local
    setpoint:
      name: Power setpoint
      description: Power setpoint in watts (required)
      required: true
      selector:
        number:
          min: 0
          max: 25000
          step: 100
          unit_of_measurement: W
          mode: box
    charge_setpoint:
      name: Max charge power
      description: Optional maximum charge power in watts
      required: false
      selector:
        number:
          min: 0
          max: 25000
          step: 100
          unit_of_measurement: W
          mode: box
    discharge_setpoint:
      name: Max discharge power
      description: Optional maximum discharge power in watts
      required: false
      selector:
        number:
          min: 0
          max: 25000
          step: 100
          unit_of_measurement: W
          mode: box
    min_soc:
      name: Minimum SOC
      description: Optional minimum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box
    max_soc:
      name: Maximum SOC
      description: Optional maximum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box

set_solar_charge:
  name: Set battery to solar charge
  description: Set the Homevolt battery to solar charge mode (charge from solar production only). Requires local mode to be enabled.
  fields:
    device_id:
      name: Device
      description: The Homevolt device to set to solar charge
      required: true
      selector:
        device:
          integration: homevolt_local
    setpoint:
      name: Power setpoint
      description: Optional power setpoint in watts
      required: false
      selector:
        number:
          min: 0
          max: 25000
          step: 100
          unit_of_measurement: W
          mode: box
    min_soc:
      name: Minimum SOC
      description: Optional minimum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box
    max_soc:
      name: Maximum SOC
      description: Optional maximum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box

set_solar_charge_discharge:
  name: Set battery to solar charge/discharge
  description: Set the Homevolt battery to solar charge/discharge mode (solar-based grid management). Requires local mode to be enabled.
  fields:
    device_id:
      name: Device
      description: The Homevolt device to set to solar charge/discharge
      required: true
      selector:
        device:
          integration: homevolt_local
    setpoint:
      name: Power setpoint
      description: Optional power setpoint in watts
      required: false
      selector:
        number:
          min: 0
          max: 25000
          step: 100
          unit_of_measurement: W
          mode: box
    charge_setpoint:
      name: Max charge power
      description: Optional maximum charge power in watts
      required: false
      selector:
        number:
          min: 0
          max: 25000
          step: 100
          unit_of_measurement: W
          mode: box
    discharge_setpoint:
      name: Max discharge power
      description: Optional maximum discharge power in watts
      required: false
      selector:
        number:
          min: 0
          max: 25000
          step: 100
          unit_of_measurement: W
          mode: box
    min_soc:
      name: Minimum SOC
      description: Optional minimum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box
    max_soc:
      name: Maximum SOC
      description: Optional maximum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box

set_full_solar_export:
  name: Set battery to full solar export
  description: Set the Homevolt battery to full solar export mode (export all solar production). Requires local mode to be enabled.
  fields:
    device_id:
      name: Device
      description: The Homevolt device to set to full solar export
      required: true
      selector:
        device:
          integration: homevolt_local
    setpoint:
      name: Power setpoint
      description: Optional power setpoint in watts
      required: false
      selector:
        number:
          min: 0
          max: 25000
          step: 100
          unit_of_measurement: W
          mode: box
    min_soc:
      name: Minimum SOC
      description: Optional minimum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box
    max_soc:
      name: Maximum SOC
      description: Optional maximum state of charge (%)
      required: false
      selector:
        number:
          min: 0
          max: 100
          step: 1
          unit_of_measurement: "%"
          mode: box

set_schedule:
  name: Set schedule
  description: Replace the battery schedule with a list of entries. Requires local mode to be enabled.
  fields:
    device_id:
      name: Device
      description: The Homevolt device to set the schedule for
      required: true
      selector:
        device:
          integration: homevolt_local
    schedule:
      name: Schedule
      description: "List of schedule entries. Each entry must have 'type' (0-9) and optionally: from_time, to_time (ISO 8601 in UTC), min_soc, max_soc (0-100%), setpoint, max_charge, max_discharge, import_limit, export_limit (watts)"
      required: true
      selector:
        object:
